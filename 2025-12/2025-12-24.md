### 2025-12-24

## k8s filebeat
*참고: https://www.elastic.co/kr/blog/monitoring-kubernetes-the-elastic-way-using-filebeat-and-metricbeat*
- Deployment.yaml에 사이드카로 filebeat 컨테이너 설치
```yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: new-app
spec:
  replicas: 1
  selector:
    matchLabels:
      app: new-app
  template:
    metadata:
      labels:
        app: new-app
    spec:
      containers:
      - name: new-app
        image: nginx:1.14.2
        ports:
        - containerPort: 80
      - name: filebeat
        # 가볍고, 보안 취약점이 거의 없음
        # wolfi - Chainguard 보안 회사가 주도하여 만든 컨테이너 배포판
        image: docker.elastic.co/beats/filebeat-wolfi:8.17.0
        args: [
          "-c", "/kr/etc/filebeat.yml",
          "-e",
        ]
        env:
          - name: LOGSTASH_HOSTS
            valueFrom:
              configMapKeyRef:
                name: env-config
                key: LOGSTASH_HOSTS
```
