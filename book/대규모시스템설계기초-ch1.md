## 대규모 시스템 설계 기초 ch1
- **서버의 확장에서 고려할 점**
  - NoSQL 알맞은 걸 잘 써보자
    - 용도
      - 낮은 지연시간 필요
      - 데이터가 비정형
      - 데이터 직렬/역직렬화만 필요
      - 많은 데이터 저장 필요
    - 종류
      1. K-V store
      2. graph store
      3. column store
      4. document store
  - 수직적 vs 수평적 규모 확장
    - 수직적은 확장에 한계가 있고, failover에 취약
  - DB 다중화를 할 때엔, 지역적으로 떨어진 곳에 배치하고, 장애 상황시 데이터 싱크 맞출 수 있도록 하자
  - 캐시 전략
    - 어떤 상황에 바람직? (갱신 << 참조)
    - TTL 정책은 어떻게? 
    - SPOF가 되진 않을지 고려
  - CDN 사용시 ?v=2 를 붙여 갱신이 필요하면 진행
  - Stateless한 백엔드를 만들어야 확장성이 좋음

- **데이터 센터**
  - geo-routing: 지리적 라우팅으로 사용자 위치에 따라 도메인을 어떤 IP로 반환할지 결정
  - 여러 리전에 데이터센터가 분포해있다면, 데이터를 여러 데이터 센터에 걸쳐 다중화를 해둘 수 있게 하자. 
  - 자동화된 배포 도구는 모든 데이터 센터에 설치하자

- **MQ, 로그/메트릭/자동화**
  - MQ로 시스템 컴포넌트를 분리하여 각기 독립적으로 확장될 수 있도록 하자
    - loosely coupled

- **DB 규모 확장**
  - 수직적 확장은 계속 한계가 나옴
    - CPU/RAM 무한 증설 불가
    - SPOF 위험성 증가
    - 비용의 증대
  - 수평적 확장
    - 샤드를 도입하자. 
    - 샤드의 문제)
      - 데이터 재 샤딩이 필요할 수 있음. 안정 해시 기법을 통해서 해결할 수 있다고 함
      - 유명인사 문제: 쪼갰는데 쪼갠 효과가 없는 경우. (알림톡은 허파 id)
        - 그냥 무지성 id modulo 가 더 안좋을 수 있음
